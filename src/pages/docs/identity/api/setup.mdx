
import { CodeGroup, Code } from '@/components/Code';

# ⭐️ setup

## Description

Gets or creates an identity.
Passing an existing identity token in the body refreshes the token.
Temporary Accounts
Until the identity is linked with the Rivet Hub (see `PrepareGameLink`), this identity will be temporary but still behave like all other identities.
This is intended to allow users to play the game without signing up while still having the benefits of having an account. When they are ready to save their account, they should be instructed to link their account (see `PrepareGameLink`).
Storing Token
`identity_token` should be stored in some form of persistent storage. The token should be read from storage and passed to `Setup` every time the client starts.


## Code Examples

<CodeGroup title='Request' tag='POST' label='https://api.rivet.gg/identity/identities'>

```bash {{ title: 'cURL' }}
# Write the request body to body.json before running
curl -X POST -d '@body.json' 'https://api.rivet.gg/identity/identities'
```

```ts
// Create Rivet client
import { RivetClient } from '@rivet-gg/api';
const RIVET = new RivetClient({ token: addYourTokenHere });

// Make request
await RIVET.identity.setup({
  // Add your request body here
});
```

</CodeGroup>


## Request Parameters


## Request Body

### `existing_identity_token`

_string_

Documentation at https://jwt.io/




## Response Body

### `game_id`

_string, required_

### `identity`

_object, required_

Information about the identity that was just authenticated.


### `identity.account_number`

_integer_

### `identity.avatar_url`

_string_

The URL of this identity's avatar image.

### `identity.awaiting_deletion`

_boolean_

Whether or not this identity is awaiting account deletion. Only visible to when the requestee is
this identity.


### `identity.bio`

_string_

Follows regex ^(?:[^\n\r]+\n?|\n){1,5}$

### `identity.display_name`

_string_

### `identity.external`

_object_

External links for an identity.

### `identity.external.profile`

_string_

A link to this identity's profile page.

### `identity.external.settings`

_string_

A link to the Rivet settings page.

### `identity.follower_count`

_integer_

### `identity.following`

_boolean_

Whether or not the requestee's identity is following this identity.

### `identity.following_count`

_integer_

### `identity.games`

_array_

### `identity.games[*].description`

_object_

### `identity.games[*].properties`

_object_

### `identity.games[*].required`

_object_

### `identity.games[*].type`

_object_

### `identity.groups`

_array_

### `identity.groups[*].description`

_object_

### `identity.groups[*].properties`

_object_

### `identity.groups[*].required`

_object_

### `identity.groups[*].type`

_object_

### `identity.identity_id`

_string_

### `identity.is_admin`

_boolean_

Whether or not this identity is an admin.

### `identity.is_following_me`

_boolean_

Whether or not this identity is both following and is followed by the requestee's identity.

### `identity.is_game_linked`

_boolean_

Whether or not this game user has been linked through the Rivet dashboard.

### `identity.is_mutual_following`

_boolean_

### `identity.is_registered`

_boolean_

Whether or not this identity is registered with a linked account.

### `identity.join_ts`

_string_

### `identity.linked_accounts`

_array_

### `identity.linked_accounts[*].description`

_object_

### `identity.linked_accounts[*].properties`

_object_

### `identity.linked_accounts[*].type`

_object_

### `identity.presence`

_object_

Information about the identity's current status, party, and active game.

### `identity.presence.game_activity`

_object_

The game an identity is currently participating in.

### `identity.presence.game_activity.game`

_object_

### `identity.presence.game_activity.game.banner_url`

_string_

The URL of this game's banner image.

### `identity.presence.game_activity.game.display_name`

_string_

### `identity.presence.game_activity.game.game_id`

_string, required_

### `identity.presence.game_activity.game.logo_url`

_string_

The URL of this game's logo image.

### `identity.presence.game_activity.game.name_id`

_string_

A human readable short identifier used to references resources. Different than a `uuid` because this is intended to be human readable. Different than `DisplayName` because this should not include special characters and be short.

### `identity.presence.game_activity.message`

_string_

A short activity message about the current game activity.

### `identity.presence.game_activity.mutual_metadata`

_object_

JSON data seen only by the given identity and their mutual followers.

### `identity.presence.game_activity.public_metadata`

_object_

JSON data seen by anyone.

### `identity.presence.status`

_string_

The current status of an identity. This helps players understand if another player is currently playing or has their game in the background.

### `identity.presence.update_ts`

_string_

### `identity_token`

_string, required_

Token used to authenticate the identity. 
Should be stored somewhere permanent. 
Pass this to `rivet.api.identity#Setup$existing_identity_token` next time `rivet.api.identity#Setup` is called. 
Token has a 90 day TTL. 
This means that if `rivet.api.identity#Setup` is not called again within 90 days, the token will no longer be valid. 
If this happens, the user can recover their account through the linking process (see `rivet.api.identity#PrepareGameLink`). 
This token should be stored locally and never sent to a server or another device. 
If this token is compromised, anyone with access to this token has control of the identity.


### `identity_token_expire_ts`

_string, required_

If this token is compromised, anyone with access to this token has control of the identity.




